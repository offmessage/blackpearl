

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>The Flotilla itself &mdash; Black Pearl 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Black Pearl 1.0 documentation" href="../index.html"/>
        <link rel="up" title="Flotilla hardware things" href="index.html"/>
        <link rel="next" title="Flotilla Hardware Inputs" href="inputs/index.html"/>
        <link rel="prev" title="Flotilla hardware things" href="index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Black Pearl
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quick start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Detailed installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gettingstarted.html">Getting started with blackpearl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../messages.html">Messages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/examplesbykit.html">Examples broken down by kit</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Flotilla hardware things</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">The Flotilla itself</a></li>
<li class="toctree-l2"><a class="reference internal" href="inputs/index.html">Flotilla Hardware Inputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="outputs/index.html">Flotilla Hardware Outputs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../software/index.html"><strong>blackpearl</strong>&#8216;s software things</a></li>
<li class="toctree-l1"><a class="reference internal" href="../blackpearl/index.html"><strong>blackpearl</strong>&#8216;s internals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usingidle.html">Using IDLE with <strong>blackpearl</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Troubleshooting your installation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Black Pearl</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Flotilla hardware things</a> &raquo;</li>
      
    <li>The Flotilla itself</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/hardware/flotilla.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="the-flotilla-itself">
<span id="flotilla"></span><h1>The Flotilla itself<a class="headerlink" href="#the-flotilla-itself" title="Permalink to this headline">¶</a></h1>
<p><strong>Source code</strong> <a class="reference external" href="https://github.com/offmessage/blackpearl/blob/master/blackpearl/things/flotilla.py">blackpearl/things/flotilla.py</a></p>
<p>This module provides all of the necessary wiring to connect to the Flotilla
hardware module, and to receive updates from the connected modules (like the
light sensors, the matrix, and so on).</p>
<p>This is the bit that makes the most of Twisted&#8217;s asyncronous library.
<strong>blackpearl</strong> uses Twisted&#8217;s SerialPort and LineReceiver classes to do all of
the heavy lifting; <strong>blackpearl</strong> just piggybacks on that and does Flotilla
specific things.</p>
<p>Most of the code is internally facing (you don&#8217;t really need to know what&#8217;s
going on in there), but if you do want to get down and dirty and use it
directly the things you&#8217;re really going to care about are defined below.</p>
<dl class="function">
<dt id=".flotillaCommand">
<code class="descclassname">.</code><code class="descname">flotillaCommand</code><span class="sig-paren">(</span><em>command</em><span class="sig-paren">)</span><a class="headerlink" href="#.flotillaCommand" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends a command to the Flotilla.</p>
<p><code class="docutils literal"><span class="pre">command</span></code> must be Python 3 bytes (e.g <code class="docutils literal"><span class="pre">b'v'</span></code>). Available commands are:</p>
<blockquote>
<div><ul class="simple">
<li><strong>d</strong> (<em>debug</em>): Asks the Flotilla to send back details information about
itself. Returns 11 lines, including the firmware version and
what&#8217;s connected to each channel</li>
<li><strong>v</strong> (<em>version</em>): Asks the Flotilla to send back simple information
about itself. Returns 5 lines, including the firmware version, the
named user, and the dock name</li>
<li><strong>n</strong> (<em>name</em>): Two options: <code class="docutils literal"><span class="pre">n</span> <span class="pre">u</span> <span class="pre">&lt;user</span> <span class="pre">name&gt;</span></code> sets the user name of
the dock. <code class="docutils literal"><span class="pre">n</span> <span class="pre">d</span> <span class="pre">&lt;dock</span> <span class="pre">name&gt;</span></code> sets the name of the dock itself. The
maximum length of both names is eight characters</li>
<li><strong>e</strong> (<em>enumerate</em>): List all of the connected modules. Returns one line
for each connected module in the form <code class="docutils literal"><span class="pre">c</span> <span class="pre">&lt;channel_number&gt;/&lt;module_name&gt;</span></code>
in the same way that you would see if a module was plugged in while the
Flotilla was already running</li>
<li><strong>s</strong> (<em>send</em>): This sends a command to a particular connected module.
See the documentation for each module for the specifics</li>
<li><strong>p</strong> (<em>power</em>): Two options: <code class="docutils literal"><span class="pre">p</span> <span class="pre">0</span></code> turns the power to all connected
modules off, while <code class="docutils literal"><span class="pre">p</span> <span class="pre">1</span></code> turns the power to all connected modules on</li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id=".connectedModules">
<code class="descclassname">.</code><code class="descname">connectedModules</code><span class="sig-paren">(</span><em>type_=None</em><span class="sig-paren">)</span><a class="headerlink" href="#.connectedModules" title="Permalink to this definition">¶</a></dt>
<dd><p>Asks the Flotilla Python code to return which modules are connected. Rather
than simply asking the Flotilla hardware to list what&#8217;s connected (as
<code class="docutils literal"><span class="pre">FlotillaClient.flotillaCommand(b'e')</span></code> would) this returns python representations
of the connected modules that can be manipulated and used.</p>
<p>If you pass <code class="docutils literal"><span class="pre">type_</span></code> (as a string, e.g. <code class="docutils literal"><span class="pre">&quot;motor&quot;</span></code>) it will filter the list
and only return the connected modules of the specified type.</p>
</dd></dl>

<dl class="function">
<dt id=".firstOf">
<code class="descclassname">.</code><code class="descname">firstOf</code><span class="sig-paren">(</span><em>type_</em><span class="sig-paren">)</span><a class="headerlink" href="#.firstOf" title="Permalink to this definition">¶</a></dt>
<dd><p>Asks the Flotilla to return the python representation of the first instance
of the give type (e.g. <code class="docutils literal"><span class="pre">&quot;motor&quot;</span></code>). First is defined as the one connected
to the lowest numbered port on the Flotilla hardware.</p>
</dd></dl>

<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Importantly <strong>blackpearl</strong>&#8216;s <code class="docutils literal"><span class="pre">FlotillaClient</span></code> class expects and
relies on there being a <strong>blackpearl</strong> project instance handed to
its <code class="docutils literal"><span class="pre">.run()</span></code> method so you will have to craft your direct usage
carefully.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="inputs/index.html" class="btn btn-neutral float-right" title="Flotilla Hardware Inputs" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Flotilla hardware things" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Andy Theyers.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>